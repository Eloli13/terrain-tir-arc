# Configuration Production - Terrain Tir à l'Arc
# ⚠️ IMPORTANT: Copier ce fichier et le renommer en .env.production
# ⚠️ CRITIQUE: Changer TOUTES les valeurs sensibles avant déploiement !

# ========================================
# ENVIRONNEMENT
# ========================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ========================================
# BASE DE DONNÉES POSTGRESQL
# ========================================
# ⚠️ Utiliser l'hôte fourni par Coolify ou une base externe
DB_HOST=postgres
DB_PORT=5432
DB_NAME=terrain_tir_arc
DB_USER=tir_arc_user
# ⚠️ GÉNÉRER UN MOT DE PASSE FORT AVEC:
# node -e "const crypto = require('crypto'); console.log('DB_PASSWORD=' + crypto.randomBytes(32).toString('base64'))"
DB_PASSWORD=CHANGEZ_MOI_GENERER_AVEC_COMMANDE_CI_DESSUS_BASE64

# ========================================
# SÉCURITÉ JWT
# ========================================
# ⚠️ GÉNÉRER DES SECRETS UNIQUES AVEC:
# node -e "const crypto = require('crypto'); console.log('JWT_SECRET=' + crypto.randomBytes(64).toString('hex'))"
# node -e "const crypto = require('crypto'); console.log('JWT_REFRESH_SECRET=' + crypto.randomBytes(64).toString('hex'))"
# node -e "const crypto = require('crypto'); console.log('SESSION_SECRET=' + crypto.randomBytes(64).toString('hex'))"
# node -e "const crypto = require('crypto'); console.log('DB_PASSWORD=' + crypto.randomBytes(32).toString('base64'))"

# Secret pour access tokens (15 min) - DOIT ÊTRE UN HEX DE 128 CARACTÈRES
JWT_SECRET=CHANGEZ_MOI_GENERER_AVEC_COMMANDE_CI_DESSUS_128_CARACTERES_HEX

# Secret pour refresh tokens (7 jours) - DOIT ÊTRE UN HEX DE 128 CARACTÈRES
JWT_REFRESH_SECRET=CHANGEZ_MOI_GENERER_AVEC_COMMANDE_CI_DESSUS_128_CARACTERES_HEX

# Durées de validité
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# ========================================
# CORS ET DOMAINE
# ========================================
# ⚠️ Mettre l'URL complète de votre domaine
CORS_ORIGIN=https://istres.srv759477.hstgr.cloud
FRONTEND_URL=https://istres.srv759477.hstgr.cloud

# Domaines autorisés (séparés par des virgules)
ALLOWED_ORIGINS=https://istres.srv759477.hstgr.cloud,https://www.istres.srv759477.hstgr.cloud

# ========================================
# LOGS ET MONITORING
# ========================================
LOG_LEVEL=info
LOG_FORMAT=json

# Activer les logs de sécurité
SECURITY_LOGS_ENABLED=true

# Conserver les logs (jours)
LOG_RETENTION_DAYS=30

# ========================================
# RATE LIMITING
# ========================================
# Limite de requêtes par IP
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Limite de tentatives de login
LOGIN_RATE_LIMIT_WINDOW_MS=900000
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=5

# ========================================
# SESSION ET COOKIES
# ========================================
# ⚠️ GÉNÉRER SESSION_SECRET AVEC LA COMMANDE CI-DESSUS (128 caractères hex)
SESSION_SECRET=CHANGEZ_MOI_GENERER_AVEC_COMMANDE_CI_DESSUS_128_CARACTERES_HEX
COOKIE_SECURE=true
COOKIE_SAMESITE=strict

# ========================================
# EMAIL (OPTIONNEL)
# ========================================
# Configuration SMTP pour notifications d'incidents
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=votre-email@gmail.com
SMTP_PASSWORD=votre-mot-de-passe-app

# Email par défaut pour les incidents
DEFAULT_INCIDENT_EMAIL=incidents@club-tir-arc.fr

# ========================================
# BACKUP (OPTIONNEL)
# ========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7

# ========================================
# MÉTRIQUES (OPTIONNEL)
# ========================================
METRICS_ENABLED=true
METRICS_PORT=9090

# ========================================
# NOTES DE SÉCURITÉ
# ========================================
# 1. Ne JAMAIS commiter ce fichier dans Git avec les vraies valeurs
# 2. Utiliser des secrets forts (64+ caractères pour JWT)
# 3. Changer le mot de passe admin après le premier déploiement
# 4. Activer les backups automatiques de la base de données
# 5. Monitorer les logs de sécurité régulièrement
# 6. Mettre à jour les dépendances régulièrement
# 7. Utiliser HTTPS uniquement (géré par Coolify/Traefik)
